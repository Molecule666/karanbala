"use strict";(self.webpackChunkkaranbala=self.webpackChunkkaranbala||[]).push([[928],{9928:function(e,n,r){r.r(n),r.d(n,{default:function(){return j}});var o=r(7313),t=r(8467),i=r(9506),u=r(8070),l=r(5554),s=r(6417),a=(0,u.Z)((function(e){return{container:{margin:"0 52px"}}})),c=function(){var e,n,r=(0,l.v9)((function(e){return e.user}));(0,o.useEffect)((function(){window.scrollTo({top:0,left:0,behavior:"smooth"})}),[]),(0,o.useEffect)((function(){}),[r]);var t=a();return(0,s.jsx)(i.Z,{className:t.container,children:(0,s.jsxs)(s.Fragment,{children:["\u0633\u0644\u0627\u0645 \u062e\u0648\u0634 \u0622\u0645\u062f\u06cc ",null===r||void 0===r||null===(e=r.user)||void 0===e?void 0:e.username," \u0628\u0627 \u0646\u0642\u0634 ",null===r||void 0===r||null===(n=r.user)||void 0===n?void 0:n.roles[0].title]})})},d=(0,u.Z)((function(e){return{container:{margin:"0 52px"}}})),v=function(){var e,n,r=(0,l.v9)((function(e){return e.user}));(0,o.useEffect)((function(){window.scrollTo({top:0,left:0,behavior:"smooth"})}),[]);var t=d();return(0,s.jsx)(i.Z,{className:t.container,children:(0,s.jsxs)(s.Fragment,{children:["\u0633\u0644\u0627\u0645 \u062e\u0648\u0634 \u0622\u0645\u062f\u06cc ",null===r||void 0===r||null===(e=r.user)||void 0===e?void 0:e.username," \u0628\u0627 \u0646\u0642\u0634 ",null===r||void 0===r||null===(n=r.user)||void 0===n?void 0:n.roles[0].title]})})},f=r(874),h=r(9273),m=r(5200),p=function(e){var n,r=null!==(n=(0,l.v9)((function(e){return e.auth})).token)&&void 0!==n?n:localStorage.getItem("token");return(0,o.useEffect)((function(){if(r){var e=(0,m.Z)(null!==r&&void 0!==r?r:"");f.h.dispatch({type:h.Q.SetUserToken,payload:r}),f.h.dispatch({type:h.Q.SetUserData,payload:e})}}),[r]),(0,s.jsx)(s.Fragment,{children:e.children})},x=function(e){var n,r=e.route,o=e.userRole,i=e.children,u=null===o||void 0===o||null===(n=o.roles)||void 0===n?void 0:n.some((function(e){var n;return r.requiredRoles.includes(e.title)&&(null===(n=e.permissions)||void 0===n?void 0:n.some((function(e){return e.resource===r.resource&&e.action===r.action})))}));return u||void 0===u?(0,s.jsx)(s.Fragment,{children:i}):(localStorage.removeItem("token"),(0,s.jsx)(t.Fg,{to:"/"}))},j=function(){var e=(0,l.v9)((function(e){return e.user})),n=localStorage.getItem("token"),r=(0,t.s0)();return(0,o.useEffect)((function(){void 0==n&&r("/")}),[r,n,e]),(0,s.jsx)(p,{children:(0,s.jsxs)(t.Z5,{children:[(0,s.jsx)(t.AW,{path:"/karanbala/dashboard",element:(0,s.jsx)(x,{userRole:null===e||void 0===e?void 0:e.user,route:{requiredRoles:["User"],resource:"post",action:"read"},children:(0,s.jsx)(v,{})})}),(0,s.jsx)(t.AW,{path:"/karanbala/admin",element:(0,s.jsx)(x,{userRole:null===e||void 0===e?void 0:e.user,route:{requiredRoles:["SuperAdmin"],resource:"post",action:"create"},children:(0,s.jsx)(c,{})})})]})})}}}]);