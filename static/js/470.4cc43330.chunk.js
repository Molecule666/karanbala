"use strict";(self.webpackChunkkaranbala=self.webpackChunkkaranbala||[]).push([[470],{3470:function(e,n,r){r.r(n),r.d(n,{default:function(){return S}});for(var t=r(5987),o=r(2791),l=r(7689),u=r(8870),a=r(2455),i=r(9434),s=r(184),c=(0,a.Z)((function(e){return{container:{margin:"0 52px"}}})),d=function(){var e=(0,i.v9)((function(e){return e}));console.log(e,"user"),(0,o.useEffect)((function(){window.scrollTo({top:0,left:0,behavior:"smooth"})}),[]);var n=c();return(0,s.jsx)(u.Z,{className:n.container,children:"\u0633\u0644\u0627\u0645 \u062e\u0648\u0634 \u0627\u0648\u0645\u062f\u06cc"})},f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",v=new Map,h=0;h<64;h++){var p=h.toString(2),g=6-p.length;p="0".repeat(g)+p,v.set(f.charCodeAt(h),p)}function m(e){var n=function(e){for(var n="",r=0;r<e.length;r++)n+=v.get(e.charCodeAt(r));n=n.slice(0,n.length-n.length%8);for(var t=[],o=0;o<n.length/8;o++)t.push(n.slice(8*o,8*o+8));return t}(e=(e=(e=e.replaceAll("=","")).replaceAll("-","+")).replaceAll("_","/"));return n.map((function(e){return parseInt(e,2)}))}function k(e){try{if(3!==e.split(".").length||"string"!==typeof e)return null;var n=m(e.split(".")[1]),r=decodeURIComponent(function(e){for(var n,r="",t=e.length,o=0;o<t;o++)n=e[o],r+=String.fromCodePoint(n>251&&n<254&&o+5<t?1073741824*(n-252)+(e[++o]-128<<24)+(e[++o]-128<<18)+(e[++o]-128<<12)+(e[++o]-128<<6)+e[++o]-128:n>247&&n<252&&o+4<t?(n-248<<24)+(e[++o]-128<<18)+(e[++o]-128<<12)+(e[++o]-128<<6)+e[++o]-128:n>239&&n<248&&o+3<t?(n-240<<18)+(e[++o]-128<<12)+(e[++o]-128<<6)+e[++o]-128:n>223&&n<240&&o+2<t?(n-224<<12)+(e[++o]-128<<6)+e[++o]-128:n>191&&n<224&&o+1<t?(n-192<<6)+e[++o]-128:n);return r}(n));return JSON.parse(r)}catch(t){return console.error("There was an error decoding token: ",t),null}}function x(e){var n=(0,o.useState)(!1),r=n[0],t=n[1],l=(0,o.useState)(null),u=l[0],a=l[1];(0,o.useEffect)((function(){i(e)}),[e]);var i=function(e){a(k(e)),t(function(e){var n=k(e),r=!0;if(n&&n.exp){var t=new Date(0);t.setUTCSeconds(n.exp),r=t.valueOf()<(new Date).valueOf()}return r}(e))};return{isExpired:r,decodedToken:u,reEvaluateToken:i}}var j=(0,a.Z)((function(e){return{container:{margin:"0 52px"}}})),w=function(){var e,n,r,t=(0,i.v9)((function(e){return e.auth})),a=((0,l.s0)(),null!==(e=t.token)&&void 0!==e?e:localStorage.getItem("token")),c=x(null!==a&&void 0!==a?a:"");console.log(c,"user"),(0,o.useEffect)((function(){window.scrollTo({top:0,left:0,behavior:"smooth"})}),[]);var d=j();return(0,s.jsx)(u.Z,{className:d.container,children:(0,s.jsxs)(s.Fragment,{children:["\u0633\u0644\u0627\u0645 \u062e\u0648\u0634 \u0622\u0645\u062f\u06cc ",null===c||void 0===c||null===(n=c.decodedToken)||void 0===n?void 0:n.username," \u0628\u0627 \u0646\u0642\u0634 ",null===c||void 0===c||null===(r=c.decodedToken)||void 0===r?void 0:r.roles[0]]})})},T=["children","userRole","route"],b=function(e){var n=e.children,r=e.userRole,o=e.route,u=((0,t.Z)(e,T),o.requiredPermissions);if(r){var a=null===r||void 0===r?void 0:r.roles;return u.map((function(e){return a.includes(e)}))?(0,s.jsx)(s.Fragment,{children:n}):(0,s.jsx)(l.Fg,{to:"/"})}return(0,s.jsx)(s.Fragment,{children:n})},S=function(){var e,n=(0,i.v9)((function(e){return e.auth})),r=(0,l.s0)(),t=null!==(e=n.token)&&void 0!==e?e:localStorage.getItem("token"),u=x(null!==t&&void 0!==t?t:"");return(0,o.useEffect)((function(){void 0==t&&r("/")}),[r,t]),(0,s.jsxs)(l.Z5,{children:[(0,s.jsx)(l.AW,{path:"/karanbala/dashboard",element:(0,s.jsx)(b,{userRole:u.decodedToken,route:{requiredPermissions:["User"]},children:(0,s.jsx)(w,{})})}),(0,s.jsx)(l.AW,{path:"/karanbala/admin",element:(0,s.jsx)(b,{userRole:u.decodedToken,route:{requiredPermissions:["SuperAdmin"]},children:(0,s.jsx)(d,{})})})]})}}}]);
//# sourceMappingURL=470.4cc43330.chunk.js.map